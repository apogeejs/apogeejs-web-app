<!DOCTYPE html>
<html>
	<head>
		<title>Apogee</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

        <!-- react stuff -->
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/react/app.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/react/selectMenu.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/react/splitFrame.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/react/treeView.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/react/tabView.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/react/iconWithStatus.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/react/componentTab.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/react/componentCell.css">
        <script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
        <script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
        <script src="https://unpkg.com/@babel/standalone@7.8.3/babel.js"></script>
        
        <script type="text/babel" src="/apogeejs-app-bundle/src/react/iconWithStatus.js"></script>
        <script type="text/babel" src="/apogeejs-app-bundle/src/react/splitFrame.js"></script>
        <script type="text/babel" src="/apogeejs-app-bundle/src/react/treeView.js"></script>
        <script type="text/babel" src="/apogeejs-app-bundle/src/react/selectMenu.js"></script>
        <script type="text/babel" src="/apogeejs-app-bundle/src/react/tabView.js"></script>
        <script type="text/babel" src="/apogeejs-app-bundle/src/react/componentUtils.js"></script>
        <script type="text/babel" src="/apogeejs-app-bundle/src/react/componentTab.js"></script>
        <script type="text/babel" src="/apogeejs-app-bundle/src/react/componentCell.js"></script>
        <script type="text/babel" src="/apogeejs-app-bundle/src/react/workspaceObjects.js"></script>
        <script type="text/babel" src="/apogeejs-app-bundle/src/react/app.js"></script>

        <script type="text/babel">
            //@TODO we have to put app inti here rather than after page load, since it takes longer to run babel standalone here
            appInit(includeBasePathInfo)
        </script>
        <!-- end react stuff -->
    
        <script type="text/javascript" src="/apogeejs-model-lib/src/webGlobals.js"></script>
        <script type="text/javascript" src="/apogeejs-model-lib/src/debugHook.js"></script>
        <script type="module" src="/apogeejs-app-bundle/src/apogeeAppBundle.js"></script>

        <script type="text/javascript">
            const includeBasePathInfo = {
                "resources": {
                    "defaultResourcePath": "/apogeejs-app-bundle/resources",
                    "domainMap": {
                        "ui-lib": "/apogeejs-ui-lib/resources",
                        "app": "/apogeejs-app-bundle/resources",
                        "combined-file-access": "/apogeejs-combined-file-access/resources"
                    }
                },
                "aceIncludes": "/apogeejs-releases/releases/ext/ace/v1.4.12/ace_includes"
            };

            const __apogee_version__ = "0.0.0 (unreleased)";
            const __browser__ = true;

            function beforeUnloadHandler() {
                if(getWorkspaceIsDirty()) {
                    return "There is unsaved data. Exit?";
                }
                else {
                    return undefined;
                }
            }
        </script>
        <script type="module">
            //set up the platform specific functions
            import CombinedFileAccess from "/apogeejs-combined-file-access/src/CombinedFileAccess.js";
            import SimpleModuleManager from "/apogeejs-simple-module-manager/src/SimpleModuleManager.js";
            import WebExternalOpener from "../src/WebExternalOpener.js";
            apogeeplatform.setFileAccessObject(new CombinedFileAccess());
            const moduleManagerOptions = {
                openLinkFromApp: false
            }
            apogeeplatform.setModuleManagerClass(SimpleModuleManager,moduleManagerOptions);
            apogeeplatform.setExternalOpener(new WebExternalOpener());
        </script>

        <link rel="stylesheet" type="text/css" href="/prosemirror-admin/compiledCss/editor.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/apogeeapp.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-lib/style/ComponentDisplay.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/LiteratePage.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-app-bundle/style/ApogeeToolbar.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-ui-lib/style/dialog.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-ui-lib/style/DisplayAndHeader.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-ui-lib/style/Menu.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-ui-lib/style/SplitPane.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-ui-lib/style/TabFrame.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-ui-lib/style/tooltip.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-ui-lib/style/TreeControl.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-ui-lib/style/ConfigurablePanel.css">     
        <link rel="stylesheet" type="text/css" href="/apogeejs-ui-lib/style/ListElement.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-combined-file-access/style/combinedFileAccess.css">
        <link rel="stylesheet" type="text/css" href="/apogeejs-releases/releases/ext/handsontable/v6.2.2/handsontable.full.min.css">
        
	</head>
    <!-- <body onload="appInit(includeBasePathInfo)" onbeforeunload="beforeUnloadHandler()">
        <div id="appContainer"></div>
	</body> -->
    <body onbeforeunload="beforeUnloadHandler()">
        <div id="appContainer" class="appContainer"></div>
	</body>
</html>
